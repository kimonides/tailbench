\section{include/sphinxbase/bitarr.h File Reference}
\label{bitarr_8h}\index{include/sphinxbase/bitarr.\+h@{include/sphinxbase/bitarr.\+h}}


An implementation bit array -\/ memory efficient storage for digit int and float data.  


{\ttfamily \#include $<$assert.\+h$>$}\newline
{\ttfamily \#include $<$string.\+h$>$}\newline
{\ttfamily \#include $<$stdint.\+h$>$}\newline
{\ttfamily \#include $<$sphinxbase/prim\+\_\+type.\+h$>$}\newline
{\ttfamily \#include $<$sphinxbase/sphinxbase\+\_\+export.\+h$>$}\newline
\subsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \textbf{ bitarr\+\_\+mask\+\_\+s}
\begin{DoxyCompactList}\small\item\em Structure that specifies bits required to efficiently store certain data. \end{DoxyCompactList}\item 
struct \textbf{ bitarr\+\_\+address\+\_\+s}
\begin{DoxyCompactList}\small\item\em Structure that stores address of certain value in bit array. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
\mbox{\label{bitarr_8h_abcb7d3674c4b4bbed7af00ddfc07a11f}} 
typedef struct \textbf{ bitarr\+\_\+mask\+\_\+s} \textbf{ bitarr\+\_\+mask\+\_\+t}
\begin{DoxyCompactList}\small\item\em Structure that specifies bits required to efficiently store certain data. \end{DoxyCompactList}\item 
\mbox{\label{bitarr_8h_a0ec20752a791dac325045da770b3510d}} 
typedef struct \textbf{ bitarr\+\_\+address\+\_\+s} \textbf{ bitarr\+\_\+address\+\_\+t}
\begin{DoxyCompactList}\small\item\em Structure that stores address of certain value in bit array. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
S\+P\+H\+I\+N\+X\+B\+A\+S\+E\+\_\+\+E\+X\+P\+O\+RT uint64 \textbf{ bitarr\+\_\+read\+\_\+int57} (\textbf{ bitarr\+\_\+address\+\_\+t} address, uint8 length, uint64 mask)
\begin{DoxyCompactList}\small\item\em Read uint64 value from bit array. \end{DoxyCompactList}\item 
S\+P\+H\+I\+N\+X\+B\+A\+S\+E\+\_\+\+E\+X\+P\+O\+RT void \textbf{ bitarr\+\_\+write\+\_\+int57} (\textbf{ bitarr\+\_\+address\+\_\+t} address, uint8 length, uint64 value)
\begin{DoxyCompactList}\small\item\em Write specified value into bit array. \end{DoxyCompactList}\item 
S\+P\+H\+I\+N\+X\+B\+A\+S\+E\+\_\+\+E\+X\+P\+O\+RT uint32 \textbf{ bitarr\+\_\+read\+\_\+int25} (\textbf{ bitarr\+\_\+address\+\_\+t} address, uint8 length, uint32 mask)
\begin{DoxyCompactList}\small\item\em Read uint32 value from bit array. \end{DoxyCompactList}\item 
S\+P\+H\+I\+N\+X\+B\+A\+S\+E\+\_\+\+E\+X\+P\+O\+RT void \textbf{ bitarr\+\_\+write\+\_\+int25} (\textbf{ bitarr\+\_\+address\+\_\+t} address, uint8 length, uint32 value)
\begin{DoxyCompactList}\small\item\em Write specified value into bit array. \end{DoxyCompactList}\item 
S\+P\+H\+I\+N\+X\+B\+A\+S\+E\+\_\+\+E\+X\+P\+O\+RT float \textbf{ bitarr\+\_\+read\+\_\+negfloat} (\textbf{ bitarr\+\_\+address\+\_\+t} address)
\begin{DoxyCompactList}\small\item\em Read non positive float32 from bit array. \end{DoxyCompactList}\item 
S\+P\+H\+I\+N\+X\+B\+A\+S\+E\+\_\+\+E\+X\+P\+O\+RT void \textbf{ bitarr\+\_\+write\+\_\+negfloat} (\textbf{ bitarr\+\_\+address\+\_\+t} address, float value)
\begin{DoxyCompactList}\small\item\em Writes non positive float32 to bit array. \end{DoxyCompactList}\item 
S\+P\+H\+I\+N\+X\+B\+A\+S\+E\+\_\+\+E\+X\+P\+O\+RT float \textbf{ bitarr\+\_\+read\+\_\+float} (\textbf{ bitarr\+\_\+address\+\_\+t} address)
\begin{DoxyCompactList}\small\item\em Reads float32 from bit array. \end{DoxyCompactList}\item 
S\+P\+H\+I\+N\+X\+B\+A\+S\+E\+\_\+\+E\+X\+P\+O\+RT void \textbf{ bitarr\+\_\+write\+\_\+float} (\textbf{ bitarr\+\_\+address\+\_\+t} address, float value)
\begin{DoxyCompactList}\small\item\em Writes float32 to bit array. \end{DoxyCompactList}\item 
S\+P\+H\+I\+N\+X\+B\+A\+S\+E\+\_\+\+E\+X\+P\+O\+RT void \textbf{ bitarr\+\_\+mask\+\_\+from\+\_\+max} (\textbf{ bitarr\+\_\+mask\+\_\+t} $\ast$bit\+\_\+mask, uint32 max\+\_\+value)
\begin{DoxyCompactList}\small\item\em Fills mask for certain int range according to provided max value. \end{DoxyCompactList}\item 
S\+P\+H\+I\+N\+X\+B\+A\+S\+E\+\_\+\+E\+X\+P\+O\+RT uint8 \textbf{ bitarr\+\_\+required\+\_\+bits} (uint32 max\+\_\+value)
\begin{DoxyCompactList}\small\item\em Computes amount of bits required ti store integers upto value provided. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
An implementation bit array -\/ memory efficient storage for digit int and float data. 

Implementation of basic operations of read/write digits consuming as little space as possible. 

\subsection{Function Documentation}
\mbox{\label{bitarr_8h_ac4e41af285dcd2f5f85037ae7889b57c}} 
\index{bitarr.\+h@{bitarr.\+h}!bitarr\+\_\+mask\+\_\+from\+\_\+max@{bitarr\+\_\+mask\+\_\+from\+\_\+max}}
\index{bitarr\+\_\+mask\+\_\+from\+\_\+max@{bitarr\+\_\+mask\+\_\+from\+\_\+max}!bitarr.\+h@{bitarr.\+h}}
\subsubsection{bitarr\+\_\+mask\+\_\+from\+\_\+max()}
{\footnotesize\ttfamily S\+P\+H\+I\+N\+X\+B\+A\+S\+E\+\_\+\+E\+X\+P\+O\+RT void bitarr\+\_\+mask\+\_\+from\+\_\+max (\begin{DoxyParamCaption}\item[{\textbf{ bitarr\+\_\+mask\+\_\+t} $\ast$}]{bit\+\_\+mask,  }\item[{uint32}]{max\+\_\+value }\end{DoxyParamCaption})}



Fills mask for certain int range according to provided max value. 


\begin{DoxyParams}{Parameters}
{\em bit\+\_\+mask} & mask that is filled \\
\hline
{\em max\+\_\+value} & bigest integer that is going to be stored using this mask \\
\hline
\end{DoxyParams}


Definition at line 172 of file bitarr.\+c.



References bitarr\+\_\+required\+\_\+bits().

\mbox{\label{bitarr_8h_a535b34c0dd2b78578dcba6d9a0a9d94a}} 
\index{bitarr.\+h@{bitarr.\+h}!bitarr\+\_\+read\+\_\+float@{bitarr\+\_\+read\+\_\+float}}
\index{bitarr\+\_\+read\+\_\+float@{bitarr\+\_\+read\+\_\+float}!bitarr.\+h@{bitarr.\+h}}
\subsubsection{bitarr\+\_\+read\+\_\+float()}
{\footnotesize\ttfamily S\+P\+H\+I\+N\+X\+B\+A\+S\+E\+\_\+\+E\+X\+P\+O\+RT float bitarr\+\_\+read\+\_\+float (\begin{DoxyParamCaption}\item[{\textbf{ bitarr\+\_\+address\+\_\+t}}]{address }\end{DoxyParamCaption})}



Reads float32 from bit array. 


\begin{DoxyParams}{Parameters}
{\em address} & in bit array from where to read \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
value float32 that was read 
\end{DoxyReturn}


Definition at line 158 of file bitarr.\+c.

\mbox{\label{bitarr_8h_aa20810e5fdf947a16c03e262dfb6b46f}} 
\index{bitarr.\+h@{bitarr.\+h}!bitarr\+\_\+read\+\_\+int25@{bitarr\+\_\+read\+\_\+int25}}
\index{bitarr\+\_\+read\+\_\+int25@{bitarr\+\_\+read\+\_\+int25}!bitarr.\+h@{bitarr.\+h}}
\subsubsection{bitarr\+\_\+read\+\_\+int25()}
{\footnotesize\ttfamily S\+P\+H\+I\+N\+X\+B\+A\+S\+E\+\_\+\+E\+X\+P\+O\+RT uint32 bitarr\+\_\+read\+\_\+int25 (\begin{DoxyParamCaption}\item[{\textbf{ bitarr\+\_\+address\+\_\+t}}]{address,  }\item[{uint8}]{length,  }\item[{uint32}]{mask }\end{DoxyParamCaption})}



Read uint32 value from bit array. 

Assumes mask == (1 $<$$<$ length) -\/ 1 where length $<$= 25 
\begin{DoxyParams}{Parameters}
{\em address} & to read from \\
\hline
{\em length} & number of bits for value \\
\hline
{\em mask} & of read value \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
uint32 value that was read 
\end{DoxyReturn}


Definition at line 116 of file bitarr.\+c.

\mbox{\label{bitarr_8h_a77b31974d463a8d7e52540cb120d73f3}} 
\index{bitarr.\+h@{bitarr.\+h}!bitarr\+\_\+read\+\_\+int57@{bitarr\+\_\+read\+\_\+int57}}
\index{bitarr\+\_\+read\+\_\+int57@{bitarr\+\_\+read\+\_\+int57}!bitarr.\+h@{bitarr.\+h}}
\subsubsection{bitarr\+\_\+read\+\_\+int57()}
{\footnotesize\ttfamily S\+P\+H\+I\+N\+X\+B\+A\+S\+E\+\_\+\+E\+X\+P\+O\+RT uint64 bitarr\+\_\+read\+\_\+int57 (\begin{DoxyParamCaption}\item[{\textbf{ bitarr\+\_\+address\+\_\+t}}]{address,  }\item[{uint8}]{length,  }\item[{uint64}]{mask }\end{DoxyParamCaption})}



Read uint64 value from bit array. 

Assumes mask == (1 $<$$<$ length) -\/ 1 where length $<$= 57 
\begin{DoxyParams}{Parameters}
{\em address} & to read from \\
\hline
{\em length} & number of bits for value \\
\hline
{\em mask} & of read value \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
uint64 value that was read 
\end{DoxyReturn}


Definition at line 98 of file bitarr.\+c.

\mbox{\label{bitarr_8h_a2697d4181f37ed1e9d241f93cad92b98}} 
\index{bitarr.\+h@{bitarr.\+h}!bitarr\+\_\+read\+\_\+negfloat@{bitarr\+\_\+read\+\_\+negfloat}}
\index{bitarr\+\_\+read\+\_\+negfloat@{bitarr\+\_\+read\+\_\+negfloat}!bitarr.\+h@{bitarr.\+h}}
\subsubsection{bitarr\+\_\+read\+\_\+negfloat()}
{\footnotesize\ttfamily S\+P\+H\+I\+N\+X\+B\+A\+S\+E\+\_\+\+E\+X\+P\+O\+RT float bitarr\+\_\+read\+\_\+negfloat (\begin{DoxyParamCaption}\item[{\textbf{ bitarr\+\_\+address\+\_\+t}}]{address }\end{DoxyParamCaption})}



Read non positive float32 from bit array. 

Probability [0, 1) in log domain can be stored like this. 
\begin{DoxyParams}{Parameters}
{\em address} & of value in bit array \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
float value taht was read 
\end{DoxyReturn}


Definition at line 141 of file bitarr.\+c.

\mbox{\label{bitarr_8h_a6e3a8cff610940311ae62c7832269196}} 
\index{bitarr.\+h@{bitarr.\+h}!bitarr\+\_\+required\+\_\+bits@{bitarr\+\_\+required\+\_\+bits}}
\index{bitarr\+\_\+required\+\_\+bits@{bitarr\+\_\+required\+\_\+bits}!bitarr.\+h@{bitarr.\+h}}
\subsubsection{bitarr\+\_\+required\+\_\+bits()}
{\footnotesize\ttfamily S\+P\+H\+I\+N\+X\+B\+A\+S\+E\+\_\+\+E\+X\+P\+O\+RT uint8 bitarr\+\_\+required\+\_\+bits (\begin{DoxyParamCaption}\item[{uint32}]{max\+\_\+value }\end{DoxyParamCaption})}



Computes amount of bits required ti store integers upto value provided. 


\begin{DoxyParams}{Parameters}
{\em max\+\_\+value} & bigest integer that going to be stored using this amount of bits \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
amount of bits required to store integers from range with maximum provided 
\end{DoxyReturn}


Definition at line 178 of file bitarr.\+c.



Referenced by bitarr\+\_\+mask\+\_\+from\+\_\+max().

\mbox{\label{bitarr_8h_a5bfde61176ff84b0aa17377545780c06}} 
\index{bitarr.\+h@{bitarr.\+h}!bitarr\+\_\+write\+\_\+float@{bitarr\+\_\+write\+\_\+float}}
\index{bitarr\+\_\+write\+\_\+float@{bitarr\+\_\+write\+\_\+float}!bitarr.\+h@{bitarr.\+h}}
\subsubsection{bitarr\+\_\+write\+\_\+float()}
{\footnotesize\ttfamily S\+P\+H\+I\+N\+X\+B\+A\+S\+E\+\_\+\+E\+X\+P\+O\+RT void bitarr\+\_\+write\+\_\+float (\begin{DoxyParamCaption}\item[{\textbf{ bitarr\+\_\+address\+\_\+t}}]{address,  }\item[{float}]{value }\end{DoxyParamCaption})}



Writes float32 to bit array. 


\begin{DoxyParams}{Parameters}
{\em address} & in bit array where to write \\
\hline
{\em value} & float32 to write \\
\hline
\end{DoxyParams}


Definition at line 165 of file bitarr.\+c.



References bitarr\+\_\+write\+\_\+int57().

\mbox{\label{bitarr_8h_ac3d0d63f49bbbca64fe5cc20bef0d2f8}} 
\index{bitarr.\+h@{bitarr.\+h}!bitarr\+\_\+write\+\_\+int25@{bitarr\+\_\+write\+\_\+int25}}
\index{bitarr\+\_\+write\+\_\+int25@{bitarr\+\_\+write\+\_\+int25}!bitarr.\+h@{bitarr.\+h}}
\subsubsection{bitarr\+\_\+write\+\_\+int25()}
{\footnotesize\ttfamily S\+P\+H\+I\+N\+X\+B\+A\+S\+E\+\_\+\+E\+X\+P\+O\+RT void bitarr\+\_\+write\+\_\+int25 (\begin{DoxyParamCaption}\item[{\textbf{ bitarr\+\_\+address\+\_\+t}}]{address,  }\item[{uint8}]{length,  }\item[{uint32}]{value }\end{DoxyParamCaption})}



Write specified value into bit array. 

Assumes value $<$ (1 $<$$<$ length) and length $<$= 25. Assumes the memory is zero initially. 
\begin{DoxyParams}{Parameters}
{\em address} & in bit array ti write to \\
\hline
{\em length} & amount of active bytes in value to write \\
\hline
{\em value} & integer to write \\
\hline
\end{DoxyParams}


Definition at line 128 of file bitarr.\+c.

\mbox{\label{bitarr_8h_a17161f257ad544b0e45b07e0085e7435}} 
\index{bitarr.\+h@{bitarr.\+h}!bitarr\+\_\+write\+\_\+int57@{bitarr\+\_\+write\+\_\+int57}}
\index{bitarr\+\_\+write\+\_\+int57@{bitarr\+\_\+write\+\_\+int57}!bitarr.\+h@{bitarr.\+h}}
\subsubsection{bitarr\+\_\+write\+\_\+int57()}
{\footnotesize\ttfamily S\+P\+H\+I\+N\+X\+B\+A\+S\+E\+\_\+\+E\+X\+P\+O\+RT void bitarr\+\_\+write\+\_\+int57 (\begin{DoxyParamCaption}\item[{\textbf{ bitarr\+\_\+address\+\_\+t}}]{address,  }\item[{uint8}]{length,  }\item[{uint64}]{value }\end{DoxyParamCaption})}



Write specified value into bit array. 

Assumes value $<$ (1 $<$$<$ length) and length $<$= 57. Assumes the memory is zero initially. 
\begin{DoxyParams}{Parameters}
{\em address} & to write to \\
\hline
{\em length} & amount of active bytes in value to write \\
\hline
{\em value} & integer to write \\
\hline
\end{DoxyParams}


Definition at line 103 of file bitarr.\+c.



Referenced by bitarr\+\_\+write\+\_\+float(), and bitarr\+\_\+write\+\_\+negfloat().

\mbox{\label{bitarr_8h_a7b4b2007c2f0caf23b2fe2fd5a11e004}} 
\index{bitarr.\+h@{bitarr.\+h}!bitarr\+\_\+write\+\_\+negfloat@{bitarr\+\_\+write\+\_\+negfloat}}
\index{bitarr\+\_\+write\+\_\+negfloat@{bitarr\+\_\+write\+\_\+negfloat}!bitarr.\+h@{bitarr.\+h}}
\subsubsection{bitarr\+\_\+write\+\_\+negfloat()}
{\footnotesize\ttfamily S\+P\+H\+I\+N\+X\+B\+A\+S\+E\+\_\+\+E\+X\+P\+O\+RT void bitarr\+\_\+write\+\_\+negfloat (\begin{DoxyParamCaption}\item[{\textbf{ bitarr\+\_\+address\+\_\+t}}]{address,  }\item[{float}]{value }\end{DoxyParamCaption})}



Writes non positive float32 to bit array. 

Probability [0, 1) in log domain can be stored like this 
\begin{DoxyParams}{Parameters}
{\em address} & where to write \\
\hline
{\em value} & what to write \\
\hline
\end{DoxyParams}


Definition at line 150 of file bitarr.\+c.



References bitarr\+\_\+write\+\_\+int57().

